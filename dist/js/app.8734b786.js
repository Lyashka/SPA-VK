(function(){"use strict";var e={56:function(e,t,s){var i=s(9963),n=s(6252);function o(e,t,s,i,o,a){const r=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(r)])}var a={},r=s(3744);const l=(0,r.Z)(a,[["render",o]]);var d=l,u=s(2119),c=(s(7658),s(3577));const h=e=>((0,n.dD)("data-v-406e8657"),e=e(),(0,n.Cn)(),e),v={class:"btnContainer"},p=(0,n.Uk)(" Назад "),f={class:"container"},m={class:"leftContainer"},g={class:"containerTopBar"},_={class:"topbar"},w=["src"],y={class:"textContent"},b={class:"itemContent"},F={class:"posts"},k={key:0},I={key:1,class:"text_content"},D={class:"friendListContainer"},L={class:"friendList"},S=h((()=>(0,n._)("div",null,"Ещё..",-1))),V=[S];function P(e,t,s,o,a,r){const l=(0,n.up)("my-button-vue"),d=(0,n.up)("PreLoader"),u=(0,n.up)("post-item"),h=(0,n.up)("friends-list-item"),S=(0,n.up)("my-profile-friend-vue");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",v,[(0,n._)("div",null,[(0,n.Wm)(l,{onClick:t[0]||(t[0]=t=>e.$router.push("/")),class:"btn"},{default:(0,n.w5)((()=>[p])),_:1})])]),(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[(0,n._)("div",f,[(0,n._)("div",m,[(0,n._)("div",g,[(0,n.wy)((0,n.Wm)(d,null,null,512),[[i.F8,a.visiblePreLoader]]),(0,n._)("div",_,[(0,n._)("div",null,[(0,n._)("img",{class:"imgProfile",src:a.friend.photo_200},null,8,w)]),(0,n._)("div",y,[(0,n.Uk)((0,c.zw)(a.friend.first_name)+" "+(0,c.zw)(a.friend.last_name)+" ",1),(0,n._)("div",b,[(0,n._)("div",null," Пол: "+(0,c.zw)(a.sex),1),(0,n._)("div",null," Взраст: "+(0,c.zw)(a.age),1),(0,n._)("div",null," Количество друзей: "+(0,c.zw)(a.friendsCount),1),(0,n._)("div",null," Общих друзей: "+(0,c.zw)(a.mutualFriendsCount),1)])])])]),(0,n._)("div",F,[(0,n.wy)((0,n.Wm)(d,null,null,512),[[i.F8,a.visiblePreLoaderPosts]]),a.posts.length>0?((0,n.wg)(),(0,n.iD)("div",k,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.posts,(e=>((0,n.wg)(),(0,n.j4)(u,{post:e,key:e.id},null,8,["post"])))),128))])):((0,n.wg)(),(0,n.iD)("div",I,(0,c.zw)(a.noPosts),1))])]),(0,n._)("div",D,[(0,n.wy)((0,n.Wm)(d,null,null,512),[[i.F8,a.visiblePreLoaderFriends]]),(0,n._)("div",L,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.friendsUser,(e=>((0,n.wg)(),(0,n.j4)(h,{friend:e,key:e.id},null,8,["friend"])))),128))]),(0,n._)("div",{iv:"",class:"addFriendList",onClick:t[1]||(t[1]=(...e)=>r.requestOffsetFriendList&&r.requestOffsetFriendList(...e))},V)])])])),_:1})],64)}const W={class:"container"};function M(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",W,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])}var C={name:"my-profile"};const O=(0,r.Z)(C,[["render",M],["__scopeId","data-v-a20db946"]]);var U=O,x=s(8605);const B=["src"],q={class:"borderBottomFriend"},A={class:"containerFriend"},$={class:"mutual"};function z(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("button",{class:"container",onClick:t[0]||(t[0]=t=>e.$router.push(`/profile/${s.friend.id}`))},[(0,n._)("img",{class:"imgFriend",src:s.friend.photo_50},null,8,B),(0,n._)("div",q,[(0,n._)("div",A,[(0,n._)("div",null,(0,c.zw)(s.friend.first_name)+" "+(0,c.zw)(s.friend.last_name),1),(0,n._)("div",$,(0,c.zw)(s.friend.mutual),1)])])])])}var T={data(){return{}},props:{friend:{type:Object}},mounted(){}};const Z=(0,r.Z)(T,[["render",z],["__scopeId","data-v-0fcca220"]]);var j=Z;const R={key:0},H={class:"container"},K={key:0},Y={class:"textContent"},G=["src"],J={key:1,class:"textContent"};function N(e,t,s,i,o,a){return void 0!=s.post.attachments&&void 0!=s.post.text?((0,n.wg)(),(0,n.iD)("div",R,[(0,n._)("div",H,[void 0!=this.post.attachments&&void 0!=this.post.attachments[0].photo?((0,n.wg)(),(0,n.iD)("div",K,[(0,n._)("div",Y,(0,c.zw)(s.post.text),1),(0,n._)("img",{class:"img",src:this.post.attachments[0].photo.sizes[3].url},null,8,G)])):((0,n.wg)(),(0,n.iD)("div",J,(0,c.zw)(s.post.text),1))])])):(0,n.kq)("",!0)}var E={data(){return{}},props:{post:{type:Object}},mounted(){}};const Q=(0,r.Z)(E,[["render",N],["__scopeId","data-v-80072e5c"]]);var X=Q;const ee={class:"btn"};function te(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",ee,[(0,n.WI)(e.$slots,"default")])}var se={name:"my-button"};const ie=(0,r.Z)(se,[["render",te]]);var ne=ie;const oe={class:"lds-dual-ring"};function ae(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",oe)}var re={name:"my-pre-loader"};const le=(0,r.Z)(re,[["render",ae],["__scopeId","data-v-7951383a"]]);var de=le,ue={components:{MyProfileFriendVue:U,FriendsListItem:j,PostItem:X,MyButtonVue:ne,PreLoader:de},data(){return{MyAccessToken:localStorage.getItem("token"),friendsUser:{},friend:{},friendsCount:"",mutualFriendsCount:"",sex:"",age:"",posts:"",noPosts:"Записей нет",offsetValue:0,newDataFriendList:{},visiblePreLoader:!1,visiblePreLoaderPosts:!1,visiblePreLoaderFriends:!1,myUserId:""}},methods:{async requestUserGet(){this.visiblePreLoader=!0;try{await(0,x.R)("https://api.vk.com/method/users.get",{user_ids:`${this.$route.params.id}`,fields:"photo_200, sex, bdate, can_post",v:"5.131",access_token:this.MyAccessToken}).then((e=>{this.friend=e.response[0],this.sex=this.friend.sex,2==this.sex?this.sex="М":1==this.sex&&(this.sex="Ж"),this.age=((new Date).getTime()-new Date(this.friend.bdate))/315576e5|0,0==this.age&&(this.age="-")}))}catch(e){console.log(e)}this.visiblePreLoader=!1},async requestFriendsUser(){this.visiblePreLoaderFriends=!0;try{await(0,x.R)("https://api.vk.com/method/friends.search",{user_id:`${this.$route.params.id}`,count:"8",fields:"photo_50",v:"5.131",access_token:this.MyAccessToken}).then((e=>{this.friendsCount=e.response.count,this.friendsUser=e.response.items}))}catch(e){console.log(e)}this.visiblePreLoaderFriends=!1},async requestMutualFriends(){try{await(0,x.R)("https://api.vk.com/method/friends.getMutual?",{source_uid:this.myUserId,target_uid:`${this.$route.params.id}`,v:"5.131",access_token:this.MyAccessToken}).then((e=>{this.mutualFriendsCount=e.response.length}))}catch(e){console.log(e)}},async requestWallGet(){this.visiblePreLoaderPosts=!0;try{await(0,x.R)("https://api.vk.com/method/wall.get",{owner_id:`${this.$route.params.id}`,v:"5.131",access_token:this.MyAccessToken}).then((e=>{this.posts=e.response.items}))}catch(e){console.log(e)}this.visiblePreLoaderPosts=!1},async requestOffsetFriendList(){this.offsetValue+=8;try{await(0,x.R)("https://api.vk.com/method/friends.search?",{user_id:`${this.$route.params.id}`,count:"15",offset:String(this.offsetValue),fields:"photo_50",v:"5.131",access_token:this.MyAccessToken}).then((e=>{this.newDataFriendList=e.response.items,this.newDataFriendList.forEach((e=>{this.friendsUser.push(e)}))}))}catch(e){console.log(e)}}},mounted(){this.myUserId=localStorage.getItem("userId"),console.log(this.myUserId),this.requestFriendsUser(),this.requestUserGet(),this.requestMutualFriends(),this.requestWallGet()}};const ce=(0,r.Z)(ue,[["render",P],["__scopeId","data-v-406e8657"]]);var he=ce;const ve=e=>((0,n.dD)("data-v-8a20b658"),e=e(),(0,n.Cn)(),e),pe={class:"main-container"},fe={class:"app__btns"},me=(0,n.Uk)("Построить"),ge={class:"container"},_e=ve((()=>(0,n._)("h4",{class:"twxt_content"},"Войти в приложение",-1))),we={class:"signIn_container"},ye={href:"https://oauth.vk.com/authorize?client_id=51428350&display=popup&redirect_uri=http://localhost:8080/&scope=friends&response_type=token&v=v=5.131"},be=(0,n.Uk)("Войти"),Fe={class:"exitBtn"},ke=(0,n.Uk)("Выйти");function Ie(e,t,s,o,a,r){const l=(0,n.up)("my-button"),d=(0,n.up)("my-select"),u=(0,n.up)("friends-list-vue"),h=(0,n.up)("PreLoader"),v=(0,n.up)("my-window-friend-list-vue"),p=(0,n.up)("my-sign-in-vue");return(0,n.wg)(),(0,n.iD)("div",pe,[(0,n._)("div",null,[(0,n._)("div",fe,[(0,n._)("div",null,[(0,n.wy)((0,n.Wm)(l,{onClick:r.buildListFriends},{default:(0,n.w5)((()=>[me])),_:1},8,["onClick"]),[[i.F8,a.buildBtnVisible]])]),(0,n._)("div",null,[(0,n.wy)((0,n.Wm)(d,{modelValue:a.selectedSort,"onUpdate:modelValue":t[0]||(t[0]=e=>a.selectedSort=e),options:a.sortoption},null,8,["modelValue","options"]),[[i.F8,!0]])])]),(0,n._)("div",ge,[(0,n._)("div",null,[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(u,{class:"list_content",localStorageDataFriend:a.localStorageDataFriend},null,8,["localStorageDataFriend"]),[[i.F8,!0]]),(0,n.wy)((0,n.Wm)(h,{class:"preLoader"},null,512),[[i.F8,a.visiblePreLoader]])])),_:1})])]),(0,n._)("div",{class:"addFriendList",onClick:t[1]||(t[1]=(...e)=>r.requestOffsetFriendList&&r.requestOffsetFriendList(...e))},[(0,n._)("div",null,(0,c.zw)(a.offsetBtn),1)]),(0,n.Wm)(p,{show:a.signInWindowVisible,"onUpdate:show":t[2]||(t[2]=e=>a.signInWindowVisible=e)},{default:(0,n.w5)((()=>[_e,(0,n._)("div",we,[(0,n._)("a",ye,[(0,n.Wm)(l,{class:"signInBtn",onClick:r.showWindowHide},{default:(0,n.w5)((()=>[be])),_:1},8,["onClick"])])])])),_:1},8,["show"])]),(0,n._)("div",Fe,[(0,n.Wm)(l,{onClick:r.exitCkick},{default:(0,n.w5)((()=>[ke])),_:1},8,["onClick"])])])}function De(e,t,s,o,a,r){const l=(0,n.up)("friends-list-item-vue");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",null,[(0,n.Wm)(i.W3,{name:"friend-list"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.localStorageDataFriend,(e=>((0,n.wg)(),(0,n.j4)(l,{friend:e,key:e.id},null,8,["friend"])))),128))])),_:1})])])}var Le={components:{FriendsListItemVue:j},data(){return{mutualIndex:JSON.parse(localStorage.getItem("mutualCountsFriends"))}},props:{localStorageDataFriend:{localStorageDataFriend:Array}},mounted(){}};const Se=(0,r.Z)(Le,[["render",De],["__scopeId","data-v-02ad6fe9"]]);var Ve=Se;const Pe=e=>((0,n.dD)("data-v-fa7c89a4"),e=e(),(0,n.Cn)(),e),We=Pe((()=>(0,n._)("option",{disabled:"",value:""},"Сортировать",-1))),Me=["value"];function Ce(e,t,s,o,a,r){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.modelValue=e),onChange:t[1]||(t[1]=(...e)=>r.changeOption&&r.changeOption(...e)),class:"select"},[We,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.options,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e.value,value:e.value},(0,c.zw)(e.name),9,Me)))),128))],544)),[[i.bM,s.modelValue]])}var Oe={name:"my-select",props:{modelValue:{type:String},options:{type:Array,default:()=>[]}},methods:{changeOption(e){this.$emit("update:modelValue",e.target.value)}}};const Ue=(0,r.Z)(Oe,[["render",Ce],["__scopeId","data-v-fa7c89a4"]]);var xe=Ue;const Be=e=>((0,n.dD)("data-v-c3ad7a46"),e=e(),(0,n.Cn)(),e),qe={class:"dialog__content"},Ae=Be((()=>(0,n._)("div",{class:"topBar"},null,-1)));function $e(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",qe,[Ae,(0,n.WI)(e.$slots,"default",{},void 0,!0)])])}var ze={name:"my-windowList",methods:{}};const Te=(0,r.Z)(ze,[["render",$e],["__scopeId","data-v-c3ad7a46"]]);var Ze=Te;const je={class:"signIn_content"};function Re(e,t,s,i,o,a){return!0===s.show?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"signIn_container",onClick:t[0]||(t[0]=(...e)=>a.hideWindow&&a.hideWindow(...e))},[(0,n._)("div",je,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])])):(0,n.kq)("",!0)}var He={name:"my-sigIn",props:{show:{type:Boolean,default:!0}},methods:{hideWindow(){this.$emit("update:show",!0)}}};const Ke=(0,r.Z)(He,[["render",Re],["__scopeId","data-v-7999a91f"]]);var Ye=Ke,Ge={components:{FriendsListVue:Ve,MyWindowFriendListVue:Ze,MyButton:ne,MySelect:xe,MySignInVue:Ye,PreLoader:de},data(){return{offsetValueProfileFriend:0,offsetBtn:"...",MyAccessToken:"",dataFriends:[],selectedSort:"",sortoption:[{value:"first_name",name:"По имени"},{value:"last_name",name:"По фамилии"},{value:"mutual",name:"Общие друзья"}],source_uid_user:"",localeStorageMutualFriends:[],newData:[],valueMutual:0,dataFriendsAndMutual:[],localStorageDataFriend:[],signInWindowVisible:!0,buildBtnVisible:!0,visiblePreLoader:!1}},methods:{exitCkick(){this.buildBtnVisible=!0,localStorage.clear(),location.reload()},showWindowHide(){this.signInWindowVisible=!1,localStorage.setItem("signInWindowVisible",this.signInWindowVisible)},buildListFriends(){this.getUrlParamUserId(),this.getUrlParam(),this.requestFriendlList(),this.selectVisible=!0,this.selectedSort="",this.buildBtnVisible=!1,localStorage.setItem("buildBtnVisible",this.buildBtnVisible)},requestFriendlList(){this.visiblePreLoader=!0,(0,x.R)("https://api.vk.com/method/friends.search?",{count:"8",fields:"photo_50",v:"5.131",access_token:this.MyAccessToken}).then((e=>{this.dataFriends=e.response.items,this.requestMutualFriends(this.dataFriends)}))},async requestMutualFriends(e){for(const t of e)await(0,x.R)("https://api.vk.com/method/friends.getMutual?",{source_uid:`${this.source_uid_user}`,target_uid:`${t.id}`,v:"5.131",access_token:this.MyAccessToken}).then((e=>{this.valueMutual=e.response.length,t["mutual"]=this.valueMutual,this.dataFriendsAndMutual.push(t)}));this.visiblePreLoader=!1,this.localStorageDataFriend=this.dataFriendsAndMutual,localStorage.setItem("localStorageDataFriend",JSON.stringify(this.dataFriendsAndMutual))},async requestOffsetFriendList(){this.offsetBtn="...",this.dataFriendsAndMutual=this.localStorageDataFriend,this.offsetValueProfileFriend=this.dataFriendsAndMutual.length+8,await(0,x.R)("https://api.vk.com/method/friends.search?",{count:"8",offset:String(this.offsetValueProfileFriend),fields:"photo_50",v:"5.131",access_token:this.MyAccessToken}).then((e=>{this.newData=e.response.items,this.requestMutualFriends(this.newData)}))},getUrlParam(){const e=window.location.href,t=e.match(/(?:#|#.+&)access_token=([^&]+)/)[1];localStorage.setItem("token",t),this.MyAccessToken=t},getUrlParamUserId(){const e=window.location.href,t=e.match(/(?:#|#.+&)user_id=([^&]+)/)[1];localStorage.setItem("userId",t),this.source_uid_user=t}},mounted(){this.buildBtnVisible=localStorage.getItem("buildBtnVisible"),null==this.buildBtnVisible?this.buildBtnVisible=!0:this.buildBtnVisible=!1,this.signInWindowVisible=localStorage.getItem("signInWindowVisible"),this.MyAccessToken=localStorage.getItem("token"),this.source_uid_user=localStorage.getItem("userId"),null==this.signInWindowVisible&&(this.signInWindowVisible=!0),this.localStorageDataFriend=JSON.parse(localStorage.getItem("localStorageDataFriend"))},watch:{selectedSort(e){"mutual"!=e?this.localStorageDataFriend.sort(((t,s)=>t[e]?.localeCompare(s[e]))):"mutual"==e&&this.localStorageDataFriend.sort(((e,t)=>t.mutual-e.mutual))}}};const Je=(0,r.Z)(Ge,[["render",Ie],["__scopeId","data-v-8a20b658"]]);var Ne=Je;const Ee=[{path:"/",component:Ne},{path:"/profile/:id",component:he}],Qe=(0,u.p7)({routes:Ee,history:(0,u.PO)("/SPA-VK/")});var Xe=Qe;(0,i.ri)(d).use(Xe).mount("#app")}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,i,n,o){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],n=e[u][1],o=e[u][2];for(var r=!0,l=0;l<i.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(r=!1,o<a&&(a=o));if(r){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,n,o]}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,o,a=i[0],r=i[1],l=i[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(l)var u=l(s)}for(t&&t(i);d<a.length;d++)o=a[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},i=self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(56)}));i=s.O(i)})();
//# sourceMappingURL=app.8734b786.js.map